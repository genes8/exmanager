<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Travel Orders - Manage your travel expenses">
    <meta name="theme-color" content="#2c3e50">
    <meta name="color-scheme" content="light">
    <title>Travel Orders</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Primary Colors */
            --primary-blue: #2c3e50;
            --secondary-blue: #4ca1af;
            --accent: #f1c40f;
            
            /* Status Colors */
            --draft-bg: #e3f2fd;
            --draft-text: #0d47a1;
            --submitted-bg: #fff8e1;
            --submitted-text: #f57f17;
            --approved-bg: #e8f5e9;
            --approved-text: #2e7d32;
            --rejected-bg: #ffebee;
            --rejected-text: #c62828;
            --reimbursed-bg: #e0f2f1;
            --reimbursed-text: #00695c;
            
            /* UI Colors */
            --background: #f5f7fa;
            --card-bg: #ffffff;
            --border: #e0e0e0;
            --icon: #666666;
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-tertiary: #999999;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, var(--background), #e4e9f2); min-height: 100vh; color: var(--text-primary); }
        .container { display: flex; min-height: 100vh; }
        .header { position: fixed; top: 0; left: 0; right: 0; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue)); color: white; height: 70px; z-index: 1000; }
        .logo { display: flex; align-items: center; }
        .logo-icon { width: 40px; height: 40px; margin-right: 10px; background: linear-gradient(45deg, #1abc9c, #3498db, #9b59b6, var(--accent)); border-radius: 8px; display: flex; flex-wrap: wrap; overflow: hidden; }
        .logo-icon-part { width: 50%; height: 50%; }
        .logo-text { font-weight: bold; font-size: 18px; }
        .user-area { display: flex; align-items: center; }
        .user-area > div { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background-color: rgba(255,255,255,0.2); margin-left: 10px; cursor: pointer; }
        
        /* Sidebar Navigation */
        .sidebar { width: 230px; background: rgba(255, 255, 255, 0.9); padding: 90px 15px 20px; border-right: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05); overflow-y: auto; display: flex; flex-direction: column; height: 100vh; position: fixed; left: 0; top: 0; bottom: 0; }
        .nav-item { display: flex; align-items: center; padding: 12px 15px; margin-bottom: 5px; border-radius: 8px; cursor: pointer; color: var(--text-primary); transition: all 0.3s; position: relative; }
        .nav-item:hover, .nav-item.active { background-color: #bbdefb; color: var(--draft-text); font-weight: bold; }
        .nav-icon { width: 24px; margin-right: 10px; display: flex; align-items: center; justify-content: center; }
        .nav-submenu { padding-left: 34px; margin-top: 5px; display: none; }
        .nav-item.active .nav-submenu { display: block; }
        .nav-subitem { padding: 8px 0; color: var(--text-secondary); cursor: pointer; font-size: 0.9em; transition: all 0.2s; }
        .nav-subitem:hover { color: var(--secondary-blue); }
        .nav-subitem.active { color: var(--draft-text); font-weight: bold; }
        
        /* Main Content */
        main { margin-left: 230px; padding: 90px 20px 20px; flex: 1; }
        .panel { background-color: var(--card-bg); border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); padding: 20px; margin-bottom: 20px; }
        .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .panel-title {
            margin-bottom: 15px; /* Dodaje razmak ispod naslova panela */
            color: var(--primary-blue);
            font-weight: 600;
            font-size: 1.4em;
        }
        
        /* Buttons */
        .primary-btn, .secondary-btn {
    display: inline-flex;
    align-items: center;
}

.primary-btn { background-color: var(--primary-blue); color: white; border: none; padding: 10px 15px; border-radius: 6px; cursor: pointer; font-weight: 500; transition: background-color 0.2s; }
        .primary-btn:hover { background-color: #1e2b38; }
        .primary-btn:focus { outline: 2px solid var(--accent); outline-offset: 2px; }
        
        .secondary-btn { background-color: transparent; border: 1px solid var(--border); color: var(--text-primary); padding: 10px 15px; border-radius: 6px; cursor: pointer; font-weight: 500; transition: all 0.2s; }
        .secondary-btn:hover { background-color: #f5f5f5; }
        .secondary-btn:focus { outline: 2px solid var(--accent); outline-offset: 2px; }
        
        .outline-btn-approve { border: 1px solid var(--approved-text); color: var(--approved-text); background: transparent; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
        .outline-btn-reject { border: 1px solid var(--rejected-text); color: var(--rejected-text); background: transparent; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
        
        /* Filter and Search */
        .filter-bar { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .filter-bar input, .filter-bar select, .filter-bar button { padding: 10px 12px; border: 1px solid var(--border); border-radius: 6px; height: 40px; }
        .filter-bar input:focus, .filter-bar select:focus { border-color: var(--secondary-blue); outline: none; }
        
        .filter-pills { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }
        .filter-pill { background-color: #f5f5f5; color: var(--text-primary); border-radius: 20px; padding: 6px 12px; font-size: 13px; cursor: pointer; transition: all 0.2s; }
        .filter-pill.active { background-color: var(--primary-blue); color: white; }
        
        /* Tables */
        .expenses-table { width: 100%; border-collapse: collapse; }
        .expenses-table th, .expenses-table td { padding: 12px 15px; border-bottom: 1px solid var(--border); text-align: left; }
        .expenses-table th { background-color: #f5f5f5; font-weight: 600; }
        .expenses-table tr:hover { background-color: #f9f9f9; }
        
        /* Status Tags */
        .status { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; display: inline-block; }
        .status-draft { background-color: var(--draft-bg); color: var(--draft-text); }
        .status-submitted { background-color: var(--submitted-bg); color: var(--submitted-text); }
        .status-approved { background-color: var(--approved-bg); color: var(--approved-text); }
        .status-rejected { background-color: var(--rejected-bg); color: var(--rejected-text); }
        .status-reimbursed { background-color: var(--reimbursed-bg); color: var(--reimbursed-text); }
        
        /* Action Buttons */
        .action-btn { background: none; border: none; color: var(--secondary-blue); cursor: pointer; font-size: 14px; padding: 4px 8px; transition: all 0.2s; }
        .action-btn:hover { text-decoration: underline; }
        .action-btn:focus { outline: 2px solid var(--accent); outline-offset: 2px; }
        
        /* Form Elements */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .form-control { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--border); }
        .form-control:focus { border-color: var(--secondary-blue); outline: none; }
        
        /* Tabs */
        .tabs { display: flex; border-bottom: 1px solid #ccc; margin-bottom: 20px; }
        .tab { padding: 10px 20px; cursor: pointer; border: 1px solid transparent; border-bottom: none; margin-bottom: -1px; }
        .tab.active { border-color: #ccc; border-bottom-color: white; background-color: white; border-top-left-radius: 6px; border-top-right-radius: 6px; font-weight: bold; }
        
        /* Tab Content */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Accessibility */
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); transition: transform 0.3s; }
            .sidebar.active { transform: translateX(0); }
            main { margin-left: 0; }
            .header { padding: 10px; }
            .logo-text { display: none; }
            .filter-bar { flex-direction: column; }
            .panel-header { flex-direction: column; align-items: flex-start; gap: 10px; }
        }
        
        .support-portal {
            margin-top: auto;
            padding: 15px;  
            background-color: #ebf7f7;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 20px;
            border-left: 4px solid #4ca1af;
        }
        
        /* Pagination Styles */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }
        .pagination button {
            padding: 8px 12px;
        }
        .pagination span {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* Sort Arrows */
        .sortable th {
            cursor: pointer;
            position: relative;
        }
        .sort-arrow {
            display: inline-block;
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 5px solid var(--text-tertiary); /* Default arrow points down */
            margin-left: 5px;
            opacity: 0.5;
            transition: opacity 0.2s;
        }
        .sortable th:hover .sort-arrow {
            opacity: 1;
        }
        .sortable th.sorted-asc .sort-arrow {
            border-bottom: none;
            border-top: 5px solid var(--text-primary);
            opacity: 1;
        }
        .sortable th.sorted-desc .sort-arrow {
             border-top: none; /* Ensure default up arrow is removed */
            border-bottom: 5px solid var(--text-primary);
            opacity: 1;
        }
        
        /* FullCalendar Header Button Styling */
        .fc .fc-button {
            background-color: #f5f7fa; /* Svetlija pozadina */
            border: 1px solid var(--border);
            color: var(--text-secondary);
            text-transform: capitalize; /* Mala slova */
            box-shadow: none; /* Ukloni senku */
            transition: all 0.2s ease;
            padding: 6px 12px; /* Malo manji padding */
        }
        .fc .fc-button:hover {
            background-color: #e4e9f2; /* Tamnija pozadina na hover */
            border-color: #c8d0db;
            color: var(--text-primary);
        }
        .fc .fc-button:focus {
            box-shadow: 0 0 0 2px var(--secondary-blue); /* Fokus stil */
        }
        .fc .fc-button-primary:not(:disabled).fc-button-active,
        .fc .fc-button-primary:not(:disabled):active {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }
        .fc .fc-toolbar-chunk .fc-button-group {
             display: flex; /* Omogućava gap */
             gap: 5px; /* Razmak između dugmića u grupi */
        }
        .fc .fc-toolbar-title {
            font-size: 1.25em; /* Malo veći naslov meseca */
            color: var(--primary-blue);
            font-weight: 600;
            margin: 0 15px; /* Dodaj malo margine */
        }
        .fc .fc-toolbar-chunk:last-child { 
             display: flex;
             align-items: center;
             gap: 5px; /* Razmak između today i grupe */
        }
        
        /* Specific style for Today button */
        .fc .fc-today-button:not(:disabled) {
            background-color: var(--secondary-blue);
            border-color: var(--secondary-blue);
            color: white; 
        }
        .fc .fc-today-button:not(:disabled):hover {
             background-color: #3a8a9b; /* Slightly darker secondary blue on hover */
             border-color: #3a8a9b;
             color: white;
        }
        
        /* Add space below the intro paragraph in the 'Create New' form */
        #create-new .panel p {
            margin-bottom: 25px; /* Add space before the form starts */
            color: var(--text-secondary); /* Make text slightly less prominent */
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <div class="logo-icon" role="img" aria-label="Logo aplikacije za upravljanje troškovima">
                    <div class="logo-icon-part" style="background-color: #1abc9c;"></div>
                    <div class="logo-icon-part" style="background-color: #3498db;"></div>
                    <div class="logo-icon-part" style="background-color: #9b59b6;"></div>
                    <div class="logo-icon-part" style="background-color: #f1c40f;"></div>
                </div>
                <div class="logo-text">EXPENSE MANAGEMENT</div>
            </div>
            <div class="user-area">
                <div class="notification-icon" role="button" aria-label="Notifications">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="sr-only">Notifications</span>
                </div>
                <div class="user-profile" role="button" aria-label="User profile">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span class="sr-only">User profile</span>
                </div>
                <div class="more-options" role="button" aria-label="More options">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <circle cx="12" cy="12" r="1"></circle>
                        <circle cx="19" cy="12" r="1"></circle>
                        <circle cx="5" cy="12" r="1"></circle>
                    </svg>
                    <span class="sr-only">More options</span>
                </div>
            </div>
        </header>
        <aside class="sidebar">
            <nav aria-label="Main navigation">
                <div class="nav-item" id="dashboard-nav">
                    <div class="nav-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                    </div>
                    <span>Dashboard</span>
                </div>
                
                <div class="nav-item" id="expenses-nav">
                    <div class="nav-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                            <line x1="2" y1="10" x2="22" y2="10"></line>
                        </svg>
                    </div>
                    <span>My Expenses</span>
                </div>
                
                <div class="nav-item" id="approvals-nav">
                    <div class="nav-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                    </div>
                    <span>Approvals</span>
                </div>
                
                <div class="nav-item active" id="travel-nav">
                    <div class="nav-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline>
                            <path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>
                        </svg>
                    </div>
                    <span>Travel Orders</span>
                </div>
                
                <div class="nav-item" id="reports-nav">
                    <div class="nav-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                    </div>
                    <span>Reports</span>
                </div>
                
                <div class="nav-item" id="categories-nav">
                    <div class="nav-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="8" y1="6" x2="21" y2="6"></line>
                            <line x1="8" y1="12" x2="21" y2="12"></line>
                            <line x1="8" y1="18" x2="21" y2="18"></line>
                            <line x1="3" y1="6" x2="3.01" y2="6"></line>
                            <line x1="3" y1="12" x2="3.01" y2="12"></line>
                            <line x1="3" y1="18" x2="3.01" y2="18"></line>
                        </svg>
                    </div>
                    <span>Categories</span>
                </div>
                
                <div class="nav-item" id="settings-nav">
                    <div class="nav-icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 7h-9"></path>
                            <path d="M14 17H5"></path>
                            <circle cx="17" cy="17" r="3"></circle>
                            <circle cx="7" cy="7" r="3"></circle>
                        </svg>
                    </div>
                    <span>Settings</span>
                </div>
            </nav>
            
            <div class="support-portal">Need Help? Contact Support</div>
        </aside>

        <main>
            <div class="tabs">
                <div class="tab active" data-tab="list-all">List All Travel Orders</div>
                <div class="tab" data-tab="create-new" style="display: none;">Create New Travel Order</div>
                <div class="tab" data-tab="calendar">Travel Calendar</div>
            </div>

            <div class="tab-content active" id="list-all">
                <div class="panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Travel Orders List</h2>
                        <button class="primary-btn" onclick="showTab('create-new')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                            New Travel Order
                        </button>
                    </div>

                    <div class="filter-bar">
                        <input type="text" placeholder="Search by destination, ID...">
                        <select>
                            <option value="">All Statuses</option>
                            <option value="draft">Draft</option>
                            <option value="submitted">Submitted</option>
                            <option value="approved">Approved</option>
                            <option value="rejected">Rejected</option>
                        </select>
                        <input type="date" placeholder="Start Date">
                        <input type="date" placeholder="End Date">
                        <button class="secondary-btn">Filter</button>
                    </div>
                    <div class="filter-pills">
                        <div class="filter-pill active" data-filter="all">All</div>
                        <div class="filter-pill" data-filter="upcoming">Upcoming</div>
                        <div class="filter-pill" data-filter="past">Past</div>
                        <div class="filter-pill" data-filter="international">International</div>
                        <div class="filter-pill" data-filter="domestic">Domestic</div>
                    </div>
                    <table class="expenses-table sortable">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Destination</th>
                                <th>Departure Date</th>
                                <th>Return Date</th>
                                <th>Estimated Cost</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Primer reda - ovo će biti dinamički popunjeno -->
                            <tr>
                                <td>TO-2024-001</td>
                                <td>Berlin, Germany</td>
                                <td>2024-05-10</td>
                                <td>2024-05-15</td>
                                <td>€ 850.00</td>
                                <td><span class="status status-approved">Approved</span></td>
                                <td>
                                    <button class="action-btn">View</button>
                                    <button class="action-btn">Edit</button>
                                </td>
                            </tr>
                             <tr>
                                <td>TO-2024-002</td>
                                <td>Paris, France</td>
                                <td>2024-06-01</td>
                                <td>2024-06-05</td>
                                <td>€ 1100.00</td>
                                <td><span class="status status-submitted">Submitted</span></td>
                                <td>
                                    <button class="action-btn">View</button>
                                </td>
                            </tr>
                             <tr>
                                <td>TO-2024-003</td>
                                <td>London, UK</td>
                                <td>2024-07-20</td>
                                <td>2024-07-25</td>
                                <td>€ 980.00</td>
                                <td><span class="status status-draft">Draft</span></td>
                                <td>
                                    <button class="action-btn">View</button>
                                    <button class="action-btn">Edit</button>
                                    <button class="action-btn">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- Dodati paginaciju ako je potrebno -->
                    <div class="pagination">
                        <button>Previous</button>
                        <span>Page 1 of 5</span>
                        <button>Next</button>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="create-new">
                <div class="panel">
                     <h2 class="panel-title">Create New Travel Order</h2>
                     <p>Form for creating a new travel order will be here.</p>
                     <form id="new-travel-order-form">
    <div class="form-row" style="display: flex; gap: 20px; margin-bottom: 15px;">
        <div class="form-group" style="flex: 1;">
            <label for="destination">Destination</label>
            <input type="text" id="destination" name="destination" class="form-control" required>
        </div>
        <div class="form-group" style="flex: 1;">
            <label for="purpose">Purpose of Travel</label>
            <input type="text" id="purpose" name="purpose" class="form-control" required>
        </div>
    </div>
    <div class="form-row" style="display: flex; gap: 20px; margin-bottom: 15px;">
        <div class="form-group" style="flex: 1;">
            <label for="departure-date">Departure Date</label>
            <input type="date" id="departure-date" name="departure_date" class="form-control" required>
        </div>
        <div class="form-group" style="flex: 1;">
            <label for="return-date">Return Date</label>
            <input type="date" id="return-date" name="return_date" class="form-control" required>
        </div>
    </div>
    <div class="form-row" style="display: flex; gap: 20px; margin-bottom: 15px;">
        <div class="form-group" style="flex: 1;">
            <label for="transport-mode">Mode of Transport</label>
            <select id="transport-mode" name="transport_mode" class="form-control">
                <option value="plane">Plane</option>
                <option value="train">Train</option>
                <option value="car">Company Car</option>
                <option value="personal_car">Personal Car</option>
                <option value="bus">Bus</option>
                <option value="other">Other</option>
            </select>
        </div>
        <div class="form-group" style="flex: 1;">
            <label for="estimated-cost">Estimated Cost</label>
            <div style="display: flex;">
                <input type="number" id="estimated-cost" name="estimated_cost" class="form-control" step="0.01" required style="flex-grow: 1; border-top-right-radius: 0; border-bottom-right-radius: 0;">
                <select id="currency" name="currency" class="form-control" style="width: 80px; border-left: none; border-top-left-radius: 0; border-bottom-left-radius: 0;">
                    <option value="EUR">EUR</option>
                    <option value="USD">USD</option>
                    <option value="BAM">BAM</option>
                </select>
            </div>
        </div>
    </div>
    <div class="form-group" style="margin-bottom: 20px;">
        <label for="notes">Notes / Justification</label>
        <textarea id="notes" name="notes" class="form-control" rows="3"></textarea>
    </div>
    <div class="form-group">
        <label for="attachments">Attachments</label>
        <input type="file" id="attachments" name="attachments" class="form-control" multiple>
        <small>Supported file types: PDF, DOC, DOCX, JPG, PNG (max 10MB)</small>
        <div id="attachment-preview" class="attachment-preview"></div>
    </div>
    <div class="form-actions" style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
        <button type="button" class="secondary-btn">Save as Draft</button>
        <button type="submit" class="primary-btn">Submit for Approval</button>
    </div>
</form>
                </div>
            </div>

            <div class="tab-content" id="calendar">
    <div class="panel">
        <h2 class="panel-title">Travel Calendar</h2>
        <div id="travel-calendar"></div>
    </div>
</div>
        </main>
    </div> <!-- Kraj .container -->

    <script>
        // Osnovna funkcionalnost za tabove
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        function showTab(tabId) {
            tabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active');
                }
            });
            tabContents.forEach(content => {
                content.classList.remove('active');
                if (content.id === tabId) {
                    content.classList.add('active');
                }
            });
            // renderuj kalendar kad postane aktivan
            if (tabId === 'calendar' && calendar) {
                calendar.render();
            }
        }

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                showTab(tab.dataset.tab);
            });
        });

        // Aktiviranje navigacione stavke
        document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
        document.getElementById('travel-nav').classList.add('active'); // Pretpostavljam da je ID 'travel-nav'

        // TODO: Dodati logiku za filtere, paginaciju, učitavanje podataka itd.
        const table = document.querySelector('.expenses-table');
        const tbody = table.querySelector('tbody');
        const rows = Array.from(tbody.querySelectorAll('tr'));
        const rowsPerPage = 5;
        const totalPages = Math.ceil(rows.length / rowsPerPage);
        let currentPage = 1;
        let filteredRows = rows; // Niz za filtrirane redove

        const paginationContainer = document.querySelector('.pagination');
        const prevButton = paginationContainer.querySelector('button:first-of-type');
        const nextButton = paginationContainer.querySelector('button:last-of-type');
        const pageIndicator = paginationContainer.querySelector('span');

        function displayPage(page) {
            currentPage = page;
            const start = (page - 1) * rowsPerPage;
            const end = Math.min(start + rowsPerPage, filteredRows.length);

            // Prikazivanje/sakrivanje redova
            rows.forEach(row => row.style.display = 'none'); // Prvo sakrij sve
            filteredRows.slice(start, end).forEach(row => row.style.display = ''); // Pokaži samo relevantne filtrirane redove

            // Ažuriranje indikatora stranice
            pageIndicator.textContent = `Page ${currentPage} of ${Math.ceil(filteredRows.length / rowsPerPage) || 1}`;

            // Onemogućavanje/omogućavanje dugmadi
            prevButton.disabled = currentPage === 1;
            nextButton.disabled = currentPage === totalPages || filteredRows.length === 0; // Onemogući i ako nema rezultata

            // Sakrij/prikaži paginaciju
            paginationContainer.style.display = Math.ceil(filteredRows.length / rowsPerPage) > 1 ? 'flex' : 'none';
        }

        prevButton.addEventListener('click', () => {
            displayPage(currentPage - 1);
        });

        nextButton.addEventListener('click', () => {
            displayPage(currentPage + 1);
        });

        // Inicijalni prikaz prve stranice
        if (rows.length > 0) {
            displayPage(1);
        } else {
            // Sakrij paginaciju ako nema redova
            paginationContainer.style.display = 'none'; 
        }

        // --- Filtriranje Tabele ---
        const searchInput = document.querySelector('.filter-bar input[type="text"]');
        const statusSelect = document.querySelector('.filter-bar select');
        const startDateInput = document.querySelector('.filter-bar input[type="date"]:nth-of-type(1)');
        const endDateInput = document.querySelector('.filter-bar input[type="date"]:nth-of-type(2)');
        const filterButton = document.querySelector('.filter-bar button.secondary-btn');

        function applyFiltersAndDisplay() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedStatus = statusSelect.value;
            const startDate = startDateInput.value ? new Date(startDateInput.value) : null;
            const endDate = endDateInput.value ? new Date(endDateInput.value) : null;

            filteredRows = rows.filter(row => {
                const orderId = row.children[0].textContent.toLowerCase();
                const destination = row.children[1].textContent.toLowerCase();
                const departureDateStr = row.children[2].textContent;
                const returnDateStr = row.children[3].textContent;
                const statusSpan = row.children[5].querySelector('span');
                const rowStatus = statusSpan ? statusSpan.textContent.toLowerCase() : '';

                // Konvertovanje datuma iz tabele (pretpostavljamo YYYY-MM-DD format)
                const departureDate = departureDateStr ? new Date(departureDateStr) : null;
                const returnDate = returnDateStr ? new Date(returnDateStr) : null;

                // Provera pretrage
                const searchMatch = searchTerm === '' || orderId.includes(searchTerm) || destination.includes(searchTerm);

                // Provera statusa
                const statusMatch = selectedStatus === '' || rowStatus.includes(selectedStatus);

                // Provera datuma (proveravamo da li je period putovanja unutar odabranog opsega)
                const dateMatch = (!startDate || (departureDate && departureDate >= startDate)) && 
                                  (!endDate || (returnDate && returnDate <= endDate));
                
                // Ako želimo da uključimo i putovanja koja *započinju* u opsegu:
                // const dateMatch = (!startDate || (departureDate && departureDate >= startDate)) && 
                //                   (!endDate || (departureDate && departureDate <= endDate));

                return searchMatch && statusMatch && dateMatch;
            });

            // Resetuj na prvu stranicu i prikaži rezultate
            displayPage(1);
        }

        // Event listeneri za filtere
        filterButton.addEventListener('click', applyFiltersAndDisplay);
        searchInput.addEventListener('keypress', (e) => { // Filtriraj i na Enter
             if (e.key === 'Enter') {
                 applyFiltersAndDisplay();
             }
        });
        statusSelect.addEventListener('change', applyFiltersAndDisplay); // Filtriraj odmah na promenu statusa
    </script>
<script>
// Filter pills functionality
    document.querySelectorAll('.filter-pill').forEach(pill => {
        pill.addEventListener('click', () => {
            document.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
            pill.classList.add('active');
            const filterType = pill.dataset.filter;
            // Implementirajte logiku filtriranja ovde
            if (filterType === 'all') {
                applyFiltersAndDisplay();
            } else if (filterType === 'upcoming') {
                filteredRows = rows.filter(row => {
                    const departureDateStr = row.children[2].textContent;
                    const departureDate = departureDateStr ? new Date(departureDateStr) : null;
                    return departureDate && departureDate > new Date();
                });
                displayPage(1);
            } else if (filterType === 'past') {
                filteredRows = rows.filter(row => {
                    const returnDateStr = row.children[3].textContent;
                    const returnDate = returnDateStr ? new Date(returnDateStr) : null;
                    return returnDate && returnDate < new Date();
                });
                displayPage(1);
            } else if (filterType === 'international') {
                filteredRows = rows.filter(row => {
                    const destination = row.children[1].textContent.toLowerCase();
                    return !destination.includes('serbia') && !destination.includes('srbija');
                });
                displayPage(1);
            } else if (filterType === 'domestic') {
                filteredRows = rows.filter(row => {
                    const destination = row.children[1].textContent.toLowerCase();
                    return destination.includes('serbia') || destination.includes('srbija');
                });
                displayPage(1);
            }
        });
    });

// Sortiranje tabele
const sortableTable = document.querySelector('.expenses-table');
const sortableHeaders = sortableTable.querySelectorAll('th');
sortableHeaders.forEach((header, index) => {
    header.classList.add('sortable');
    let arrow = header.querySelector('.sort-arrow');
    if (!arrow) {
        arrow = document.createElement('span');
        arrow.classList.add('sort-arrow');
        header.appendChild(arrow);
    }
    header.addEventListener('click', () => {
        sortableHeaders.forEach(h => {
            if (h !== header) h.classList.remove('sorted-asc', 'sorted-desc');
        });
        const isAsc = header.classList.contains('sorted-asc');
        header.classList.toggle('sorted-asc', !isAsc);
        header.classList.toggle('sorted-desc', isAsc);
        const sortDirection = isAsc ? -1 : 1;
        const sortedRows = Array.from(rows).sort((a, b) => {
            const aValue = a.children[index].textContent;
            const bValue = b.children[index].textContent;
            if (index === 2 || index === 3) {
                return new Date(aValue) > new Date(bValue) ? sortDirection : -sortDirection;
            }
            if (index === 4) {
                const aNum = parseFloat(aValue.replace(/[^0-9.-]+/g, ''));
                const bNum = parseFloat(bValue.replace(/[^0-9.-]+/g, ''));
                return aNum > bNum ? sortDirection : -sortDirection;
            }
            return aValue.localeCompare(bValue) * sortDirection;
        });
        tbody.innerHTML = '';
        sortedRows.forEach(row => tbody.appendChild(row));
        applyFiltersAndDisplay();
    });
});
// File upload preview
const attachmentInput = document.getElementById('attachments');
const attachmentPreview = document.getElementById('attachment-preview');
if (attachmentInput && attachmentPreview) {
    attachmentInput.addEventListener('change', () => {
        attachmentPreview.innerHTML = '';
        const files = attachmentInput.files;
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const fileItem = document.createElement('div');
            fileItem.className = 'attachment-item';
            fileItem.innerHTML = `
                <span>${file.name}</span>
                <span>(${(file.size / 1024).toFixed(2)} KB)</span>
                <button type="button" class="remove-file" data-index="${i}">×</button>
            `;
            attachmentPreview.appendChild(fileItem);
        }
    });
}
// FullCalendar inicijalizacija
let calendar; // globalna promenljiva za FullCalendar instancu
window.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('travel-calendar');
    if (calendarEl) {
        calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            height: 'auto', // Dodata opcija za automatsku visinu
            headerToolbar: {
                left: 'prev,next', // Pomereno 'today' dugme
                center: 'title',
                right: 'today dayGridMonth,timeGridWeek,listMonth' // Dodato 'today' dugme na desnu stranu
            },
            events: [
                {
                    title: 'Berlin, Germany',
                    start: '2024-05-10',
                    end: '2024-05-15',
                    backgroundColor: '#e8f5e9',
                    borderColor: '#2e7d32',
                    textColor: '#2e7d32'
                },
                {
                    title: 'Paris, France',
                    start: '2024-06-01',
                    end: '2024-06-05',
                    backgroundColor: '#fff8e1',
                    borderColor: '#f57f17',
                    textColor: '#f57f17'
                }
            ]
        });
        calendar.render();
    }
});
</script>
</body>
</html>